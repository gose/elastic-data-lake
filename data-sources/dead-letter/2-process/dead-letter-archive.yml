input {
    pipeline {
        address => "dead-letter-archive"
    }
}
filter {
}
output {
    s3 {
        access_key_id => "ABC"
        secret_access_key => "XYZ"
        endpoint => "https://minio.corp-intranet.com:9443"
        validate_credentials_on_root_bucket => false
        bucket => "data-lake"
        prefix => "dead-letter-archive/%{+YYYY}-%{+MM}-%{+dd}"
        temporary_directory => "/tmp/logstash/dead-letter-archive"
        codec => json_lines
        size_file => 5368709120
        time_file => 1
        # encoding => "gzip"
        additional_settings => {
            force_path_style => true
            follow_redirects => false
        }
    }
}
